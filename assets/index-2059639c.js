import{h as s,l as r,M as e,v as o,i,y as a,N as t,n as l,s as m,w as n,O as d,o as u,u as c,p,k as g}from"./vendor-c838bb38.js";import{h as _,c as h,_ as v}from"./index-fc995af1.js";var F=Object.defineProperty,w=Object.getOwnPropertyDescriptor;let b=class{async getLogin(s){const{username:r,password:e,userEmail:o,smsCode:i}=s;return await _.post("/auth/login-register",{username:r,password:e,userEmail:o,smsCode:i})}async getSmsCode(s){return await _.post("/auth/verify-code",{email:s})}};b=((s,r,e,o)=>{for(var i,a=o>1?void 0:o?w(r,e):r,t=s.length-1;t>=0;t--)(i=s[t])&&(a=(o?i(r,e,a):i(a))||a);return o&&a&&F(r,e,a),a})([h],b);const y=new b,C={name:"LoginBox",data:()=>({isLogin:!0,loginForm:{username:"admin",email:"1960638223@qq.com",password:"123456789o",smsCode:void 0},registerForm:{name:"adi",email:"",password:""},isLoding:!1,getSms:"获取验证码",errors:{username:"",email:"",password:"",smsCode:""},rules:{username:{required:!0,message:"请输入用户名"},email:{required:!0,type:"email",message:"请输入正确的邮箱地址"},password:{required:!0,message:"请输入密码"},smsCode:{required:!0,message:"请输入验证码"}}}),methods:{login(){alert("登录成功")},register(){},async getEmailSms(){if(this.isLoding)return;this.isLoding=!0;let s=60;this.getSms=`${s}s`;const r=setInterval((()=>{s--,this.getSms=`${s}s`,s<=0&&(clearInterval(r),this.getSms="获取验证码",this.isLoding=!1)}),1e3),{data:e,reason:o,code:i}=await y.getSmsCode(this.loginForm.email);200===i?this.$message.success(o):this.$message.error(o)},validateForm(){let s=!0;this.errors={};for(let r in this.rules)this.rules[r].required&&!this.loginForm[r]?(this.errors[r]=this.rules[r].message,s=!1):"email"!==this.rules[r].type||this.validateEmail(this.loginForm[r])||(this.errors[r]=this.rules[r].message,s=!1);return s},validateEmail:s=>/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(s),submitForm(){this.validateForm()&&this.login()},submitFormRegister(){this.validateForm()&&this.register()},isErrorShow(){this.isLogin=!this.isLogin,this.loginForm={username:"",email:"",password:"",smsCode:""},this.registerForm={name:"",email:"",password:""},this.errors={username:"",email:"",password:"",smsCode:""}}}},f=s=>(p("data-v-17af70e1"),s=s(),g(),s),x={class:"main-box"},L=f((()=>r("h2",{class:"title"},"创建帐户",-1))),k=f((()=>r("span",{class:"text"},"或使用电子邮件进行注册",-1))),S={class:"input-box"},E={key:0,class:"error__message"},U={class:"input-box"},V={key:0,class:"error__message"},q={class:"input-box"},R={key:0,class:"error__message"},j={class:"sms-code"},z={key:0,class:"error__message"},O=f((()=>r("h2",{class:"title"},"登录网站",-1))),$=f((()=>r("span",{class:"text"},"或在左侧进行注册",-1))),A={class:"input-box"},I={key:0,class:"error__message"},Z={class:"input-box"},P={key:0,class:"error__message"},B={class:"input-box"},D={key:0,class:"error__message"},M={class:"sms-code"},N={key:0,class:"error__message"},G=f((()=>r("div",{class:"switch__circle"},null,-1))),H=f((()=>r("div",{class:"switch__circle switch__circle_top"},null,-1))),J={class:"switch__container"};const K=v(C,[["render",function(p,g){const _=d;return u(),s("div",x,[r("div",{class:l(["container","container-register",{"is-txl":p.isLogin}])},[r("form",{class:"register-form",onSubmit:g[9]||(g[9]=e(((...s)=>p.submitFormRegister&&p.submitFormRegister(...s)),["prevent"]))},[L,k,r("div",S,[p.errors.username?(u(),s("div",E,o(p.errors.username),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.username}]),type:"text",placeholder:"用户名","onUpdate:modelValue":g[0]||(g[0]=s=>p.loginForm.username=s),onFocus:g[1]||(g[1]=s=>p.errors.username="")},null,34),[[t,p.loginForm.username]])]),r("div",U,[p.errors.email?(u(),s("div",V,o(p.errors.email),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.email}]),type:"text",placeholder:"邮箱","onUpdate:modelValue":g[2]||(g[2]=s=>p.registerForm.email=s),onFocus:g[3]||(g[3]=s=>p.errors.email="")},null,34),[[t,p.registerForm.email]])]),r("div",q,[p.errors.password?(u(),s("div",R,o(p.errors.password),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.password}]),type:"password",placeholder:"密码","onUpdate:modelValue":g[4]||(g[4]=s=>p.registerForm.password=s),onFocus:g[5]||(g[5]=s=>p.errors.password="")},null,34),[[t,p.registerForm.password]])]),r("div",j,[p.errors.smsCode?(u(),s("div",z,o(p.errors.smsCode),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.smsCode}]),type:"text",placeholder:"验证码","onUpdate:modelValue":g[6]||(g[6]=s=>p.registerForm.smsCode=s),onFocus:g[7]||(g[7]=s=>p.errors.smsCode="")},null,34),[[t,p.registerForm.smsCode]]),m(_,{onClick:p.getEmailSms,disabled:p.isLoding,class:"primary-btn"},{default:n((()=>[c(o(p.getSms),1)])),_:1},8,["onClick","disabled"])]),r("div",{class:"primary-btn",onClick:g[8]||(g[8]=(...s)=>p.submitFormRegister&&p.submitFormRegister(...s))},"立即注册")],32)],2),r("div",{class:l(["container","container-login",{"is-txl is-z200":p.isLogin}])},[r("form",{class:"login-form",onSubmit:g[19]||(g[19]=e(((...s)=>p.submitForm&&p.submitForm(...s)),["prevent"]))},[O,$,r("div",A,[p.errors.username?(u(),s("div",I,o(p.errors.username),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.username}]),type:"text",placeholder:"用户名","onUpdate:modelValue":g[10]||(g[10]=s=>p.loginForm.username=s),onFocus:g[11]||(g[11]=s=>p.errors.username="")},null,34),[[t,p.loginForm.username]])]),r("div",Z,[p.errors.email?(u(),s("div",P,o(p.errors.email),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.email}]),type:"text",placeholder:"邮箱","onUpdate:modelValue":g[12]||(g[12]=s=>p.loginForm.email=s),onFocus:g[13]||(g[13]=s=>p.errors.email="")},null,34),[[t,p.loginForm.email]])]),r("div",B,[p.errors.password?(u(),s("div",D,o(p.errors.password),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.password}]),type:"password",placeholder:"密码","onUpdate:modelValue":g[14]||(g[14]=s=>p.loginForm.password=s),onFocus:g[15]||(g[15]=s=>p.errors.password="")},null,34),[[t,p.loginForm.password]])]),r("div",M,[p.errors.smsCode?(u(),s("div",N,o(p.errors.smsCode),1)):i("",!0),a(r("input",{class:l(["form__input",{input__error:p.errors.smsCode}]),type:"text",placeholder:"验证码","onUpdate:modelValue":g[16]||(g[16]=s=>p.loginForm.smsCode=s),onFocus:g[17]||(g[17]=s=>p.errors.smsCode="")},null,34),[[t,p.loginForm.smsCode]]),m(_,{onClick:p.getEmailSms,disabled:p.isLoding,class:"primary-btn"},{default:n((()=>[c(o(p.getSms),1)])),_:1},8,["onClick","disabled"])]),r("div",{class:"primary-btn",onClick:g[18]||(g[18]=(...s)=>p.submitForm&&p.submitForm(...s))},"立即登录")],32)],2),r("div",{class:l(["switch",{login:p.isLogin}])},[G,H,r("div",J,[r("h2",null,o(p.isLogin?"你好，陌生人 !":"欢迎回来 !"),1),r("p",null,o(p.isLogin?"输入您的个人详细信息并开始我们的旅程":"要与我们保持联系，请使用您的个人信息登录"),1),r("div",{class:"primary-btn",onClick:g[20]||(g[20]=(...s)=>p.isErrorShow&&p.isErrorShow(...s))},o(p.isLogin?"立即注册":"立即登录"),1)])],2)])}],["__scopeId","data-v-17af70e1"]]);export{K as default};
