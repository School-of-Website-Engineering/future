import{b as e,e as a,i as t,u as s,w as n,k as l,p as r,l as i,m as o,s as c,q as d,ac as u,y as m,F as v,G as f,x as p,ag as h,C as g,ah as y,c as _,j as b,z as k,V as C,D as I,U as S,_ as x,a4 as w,v as F,W as R,o as T,a9 as M,ai as N,a5 as L,a6 as D,a7 as H}from"./vendor-d9fce5dd.js";import{F as j,_ as V,c as B,r as E,a as U,e as A,h as K,d as O,u as q}from"./index-5ecedcfa.js";const z=e=>(r("data-v-b70f776a"),e=e(),i(),e),P={class:"header-left-left"},J=z((()=>o("svg",{x:"0",y:"0",class:"icon-2xnN2Y","aria-hidden":"true",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},[o("path",{fill:"currentColor",d:"M12 2C6.486 2 2 6.486 2 12C2 17.515 6.486 22 12 22C14.039 22 15.993 21.398 17.652 20.259L16.521 18.611C15.195 19.519 13.633 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4C16.411 4 20 7.589 20 12V12.782C20 14.17 19.402 15 18.4 15L18.398 15.018C18.338 15.005 18.273 15 18.209 15H18C17.437 15 16.6 14.182 16.6 13.631V12C16.6 9.464 14.537 7.4 12 7.4C9.463 7.4 7.4 9.463 7.4 12C7.4 14.537 9.463 16.6 12 16.6C13.234 16.6 14.35 16.106 15.177 15.313C15.826 16.269 16.93 17 18 17L18.002 16.981C18.064 16.994 18.129 17 18.195 17H18.4C20.552 17 22 15.306 22 12.782V12C22 6.486 17.514 2 12 2ZM12 14.599C10.566 14.599 9.4 13.433 9.4 11.999C9.4 10.565 10.566 9.399 12 9.399C13.434 9.399 14.6 10.565 14.6 11.999C14.6 13.433 13.434 14.599 12 14.599Z"})],-1))),Z=z((()=>o("span",null,"JDSA Ling",-1))),$=V(e({__name:"HeaderLeft",setup:e=>(e,r)=>{const i=l;return a(),t("div",P,[J,Z,s(i,{"hide-after":0,enterable:!1,effect:"dark",content:"在线",placement:"bottom"},{default:n((()=>[s(j)])),_:1})])}}),[["__scopeId","data-v-b70f776a"]]),G=e=>(r("data-v-84ae6dba"),e=e(),i(),e),W={class:"header-right-right"},Y=G((()=>o("span",null,[o("i",{class:"fa-solid fa-phone-volume"})],-1))),Q=G((()=>o("span",null,[o("i",{class:"fa-solid fa-video"})],-1))),X=G((()=>o("span",null,[o("i",{class:"fa-solid fa-user-plus"})],-1))),ee=G((()=>o("div",{class:"search-box"},[o("input",{type:"text",placeholder:"搜索"}),o("i",{class:"fa-solid fa-search"})],-1))),ae=G((()=>o("span",null,[o("i",{class:"fa-solid fa-inbox"})],-1))),te=G((()=>o("span",null,[o("i",{class:"fa-solid fa-circle-question"})],-1))),se=V({},[["render",function(e,r){const i=l;return a(),t("div",W,[s(i,{"hide-after":0,class:"box-item",effect:"dark",content:"语音通话",placement:"bottom-end"},{default:n((()=>[Y])),_:1}),s(i,{"hide-after":0,enterable:!1,effect:"dark",content:"视频通话",placement:"bottom"},{default:n((()=>[Q])),_:1}),s(i,{"hide-after":0,enterable:!1,effect:"dark",content:"添加好友",placement:"bottom"},{default:n((()=>[X])),_:1}),ee,s(i,{"hide-after":0,enterable:!1,effect:"dark",content:"设置",placement:"bottom"},{default:n((()=>[ae])),_:1}),s(i,{"hide-after":0,enterable:!1,effect:"dark",content:"帮助",placement:"bottom"},{default:n((()=>[te])),_:1})])}],["__scopeId","data-v-84ae6dba"]]),ne=e=>(r("data-v-f0f3becb"),e=e(),i(),e),le={class:"main-message",style:{"padding-right":"0"}},re={class:"panelBanner bannerPremium",style:{"background-color":"#1f2123"}},ie={class:"head-box",style:{display:"flex"}},oe=["src"],ce={class:"badgeList"},de=["src"],ue={class:"right-card"},me={class:"userTagNoNickname"},ve=ne((()=>o("div",{class:"line"},null,-1))),fe=ne((()=>o("h2",{class:"userDes"},"自我介绍",-1))),pe={style:{"-webkit-line-clamp":"6"}},he={class:"userText"},ge=ne((()=>o("div",{class:"line"},null,-1))),ye=ne((()=>o("h2",{class:"userDes"},"Future用户注册时间",-1))),_e={style:{"-webkit-line-clamp":"6"}},be={class:"userText"},ke=ne((()=>o("div",{class:"line"},null,-1))),Ce=ne((()=>o("h2",{class:"userDes"},"备注",-1))),Ie={class:"note"},Se=["value"],xe={class:"right-card"},we={class:"userTagNoNickname"},Fe={key:0},Re={class:"commentServer-num"},Te=ne((()=>o("i",{class:"fa-solid fa-chevron-right"},null,-1))),Me={class:"commentServer"},Ne={class:"commentServerItem"},Le=["src"],De={key:1},He=ne((()=>o("div",{class:"line"},null,-1))),je={class:"userTagNoNickname"},Ve={key:0,class:"commentFriend"},Be={class:"commentServer-num"},Ee=ne((()=>o("i",{class:"fa-solid fa-chevron-right"},null,-1))),Ue={class:"commentFriendItem"},Ae=["src"],Ke={key:1},Oe=V(e({__name:"AsideRight",setup(e){const r=c({commonServer:[],commonFriend:[]}),i=U((async e=>{const{data:a}=await A.getCommonServerCount(e);r.commonServer=a.commonServer,r.commonFriend=a.commonFriend})),g=B(),y=d((()=>g.friendInfo.remark)),_=d((()=>({online:"在线",offline:"离线",idle:"闲置",dnd:"忙碌"}[g.friendInfo.status])));return u((()=>E.currentRoute.value.params.id),(e=>{g.getFriendInfo(e),i(e)}),{immediate:!0}),(e,i)=>{const c=h,d=l;return a(),t("div",le,[o("div",re,[o("div",ie,[s(c,{class:"headstyle",src:m(g).friendInfo.avatar},null,8,["src"]),s(d,{effect:"dark",content:m(_),placement:"top",style:{"margin-left":"10px"}},{default:n((()=>[s(j,{status:m(g).friendInfo.status,class:"status-"},null,8,["status"])])),_:1},8,["content"]),o("img",{class:"background-img",src:m(g).friendInfo.background,alt:""},null,8,oe)])]),o("div",ce,[(a(!0),t(v,null,f(m(g).friendInfo.tags,((e,l)=>(a(),t("a",{key:l},[s(d,{effect:"dark",content:m(g).friendInfo.tags[l].tag,placement:"top"},{default:n((()=>[o("img",{alt:"Null",class:"imgStyle",src:m(g).friendInfo.tags[l].link},null,8,de)])),_:2},1032,["content"])])))),128))]),o("div",ue,[o("div",me,[o("span",null,p(m(g).friendInfo.username),1),o("span",null,"#"+p(m(g).friendInfo.discriminator),1)]),ve,fe,o("div",pe,[o("span",he,p(m(g).friendInfo.introduction),1)]),ge,ye,o("div",_e,[o("span",be,p(m(g).friendInfo.registerTime),1)]),ke,Ce,o("div",Ie,[o("textarea",{placeholder:"点击添加备注","aria-label":"备注",maxlength:"256",class:"textarea",style:{height:"24px"},value:m(y)},null,8,Se)])]),o("div",xe,[o("div",we,[r.commonServer.length?(a(),t("div",Fe,[o("span",Re,p(r.commonServer.length)+"个共同的服务器",1),Te,o("div",Me,[o("div",Ne,[(a(!0),t(v,null,f(r.commonServer,(e=>(a(),t("div",{class:"commentServerItemImg",key:e.id},[o("img",{src:e.icon,alt:"Null"},null,8,Le),o("span",null,p(e.name),1)])))),128))])])])):(a(),t("span",De,"暂无共同服务器"))]),He,o("div",je,[r.commonFriend.length?(a(),t("div",Ve,[o("span",Be,p(r.commonFriend.length)+"个共同的好友",1),Ee,o("div",Ue,[(a(!0),t(v,null,f(r.commonFriend,(e=>(a(),t("div",{class:"commentFriendItemImg",key:e.id},[o("img",{src:e.avatar,alt:"Null"},null,8,Ae),o("span",null,p(e.name),1),o("span",null,"#"+p(e.tagId),1)])))),128))])])):(a(),t("span",Ke,"暂无共同好友"))])])])}}}),[["__scopeId","data-v-f0f3becb"]]),qe=e=>(r("data-v-b6f83bfc"),e=e(),i(),e),ze={class:"hover-edit-wrapper"},Pe={key:0,class:"hover-edit-wrapper-content"},Je=qe((()=>o("i",{class:"fa-solid fa-pencil"},null,-1))),Ze={key:0,class:"is-edit"},$e={key:1,class:"input-container"},Ge=["onKeydown"],We={class:"keyboard-tips"},Ye=qe((()=>o("span",null,"ESC键",-1))),Qe=qe((()=>o("span",null,"  •  ",-1))),Xe=qe((()=>o("span",null,"回车键",-1))),ea=V(e({__name:"HoverEdit",props:{display:{type:Boolean,default:!1},mouseenter:{type:Boolean,default:!1},mouseleave:{type:Boolean,default:!0},item:{type:Object,default:null}},setup(r){const i=r,c=g(!1),d=g("");g(!1),e({name:"HoverEdit"});const u=()=>{var e;d.value=null==(e=i.item)?void 0:e.content,c.value=!0},m=()=>{c.value=!1,i.item.content=d.value,i.item.isEdit=!0};return(e,r)=>{var v;const f=x,p=w,h=l;return a(),t("div",ze,[c.value?b("",!0):(a(),t("div",Pe,[y(e.$slots,"default",{},void 0,!0),s(h,{effect:"dark",content:"编辑",placement:"top","hide-after":0,"open-delay":50},{default:n((()=>[s(p,{class:"hover-edit-wrapper-content-edit"},{default:n((()=>{var e;return[i.display||i.mouseenter||!(null==(e=i.item)?void 0:e.isShow)?b("",!0):(a(),_(f,{key:0,onClick:u},{default:n((()=>[Je])),_:1}))]})),_:1})])),_:1}),(null==(v=i.item)?void 0:v.isEdit)?(a(),t("p",Ze,"(已编辑)")):b("",!0)])),c.value?(a(),t("div",$e,[k(o("textarea",{class:"edit-input",type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>d.value=e),onKeydown:[I(m,["enter"]),r[1]||(r[1]=I(S((e=>c.value=!1),["stop"]),["esc"]))]},null,40,Ge),[[C,d.value]]),o("div",We,[Ye,o("span",{class:"edit-input-key",onClick:r[2]||(r[2]=e=>c.value=!1)},"取消"),Qe,Xe,o("span",{class:"edit-input-key",onClick:m},"保存")])])):b("",!0)])}}}),[["__scopeId","data-v-b6f83bfc"]]);Object.defineProperty,Object.getOwnPropertyDescriptor;let aa=class{async getChatRecord(e){return await K.get("/chat/"+e)}async getChatSend(e){return await K.post("/chat/ing",{...e},{headers:{"Content-Type":"application/json"}})}};aa=((e,a,t,s)=>{for(var n,l=a,r=e.length-1;r>=0;r--)(n=e[r])&&(l=n(l)||l);return l})([O],aa);const ta=new aa,sa=e=>(r("data-v-a05a8b7d"),e=e(),i(),e),na={class:"chat-head"},la={class:"chat-head-left"},ra={class:"chat-head-left-avatar"},ia=["src"],oa={class:"chat-head-left-name"},ca={class:"chat-head-right"},da={class:"chat-head-right-right"},ua={class:"text"},ma=sa((()=>o("span",null,"这是您与 ",-1))),va=sa((()=>o("span",null," 私信记录的开头",-1))),fa={class:"info"},pa=sa((()=>o("span",null,null,-1))),ha={key:0},ga={key:1},ya={class:"button"},_a=V(e({__name:"ChatHead",props:{chatRecord:null},setup(l){const r=l,i=c({commonServer:[{id:"",name:"",icon:"",tagId:""}],commonFriend:[{id:"",name:"",avatar:"",tagId:""}]});e({name:"ChatHead"}),u((()=>r.chatRecord.id),(()=>{d()}));const d=U((async()=>{const{data:e}=await A.getCommonServerCount(r.chatRecord.id);i.commonServer=e?e.commonServer:[]})),m=()=>{},v=()=>{};return(e,r)=>{const c=R;return a(),t("div",na,[o("div",la,[o("div",ra,[o("img",{src:l.chatRecord.avatar,alt:""},null,8,ia)]),o("div",oa,[o("span",null,p(l.chatRecord.name),1)])]),o("div",ca,[o("div",da,[o("div",ua,[ma,o("span",null,p(l.chatRecord.name),1),va]),o("div",fa,[pa,0===i.commonServer.length?(a(),t("span",ha,"没有共同的服务器")):(a(),t("span",ga,p(i.commonServer.length)+" 个共同的服务器 ",1)),o("div",ya,[s(c,{size:"small",onClick:m,class:"delete"},{default:n((()=>[F(" 删除好友 ")])),_:1}),s(c,{size:"small",onClick:v,class:"shield"},{default:n((()=>[F(" 屏蔽 ")])),_:1})])])])])])}}}),[["__scopeId","data-v-a05a8b7d"]]),ba={class:"chat-record-list",ref:"chatRecordList"},ka=["onMouseenter","onMouseleave"],Ca={class:"chat-record-list-item-left"},Ia={class:"chat-record-list-item-right"},Sa={class:"chat-record-list-item-right-top"},xa={class:"chat-record-list-item-right-top-left"},wa={class:"chat-record-list-item-right-bottom"},Fa={key:0,class:"chat-record-list-none"},Ra=(Da=()=>o("span",null,"暂无聊天记录,快来和好友聊天吧",-1),r("data-v-4b725837"),Da=Da(),i(),Da),Ta={class:"chat-search-box"},Ma=["placeholder","onKeydown"],Na=V(e({__name:"Main",setup(e){const l=g(""),r=c({avatar:"",id:"",message:[],name:"",time:""}),i=c([]),d=q(),y=g(!1),S=g(!0),w=()=>{setTimeout((()=>{const e=document.querySelector(".chat-record-list");null==e||e.scrollTo(0,e.scrollHeight)}),0)};T((()=>{d.getUserInfo()}));const L=Math.floor(1e11*Math.random()),D=()=>{i.push({content:l.value,messageType:"text",messageFrom:"me",messageId:L.toString(),time:(new Date).toLocaleString(),name:"JDSA Ling"}),w(),H(E.currentRoute.value.params.id,l.value),l.value=""},H=U((async(e,a)=>{if(!e||!a)return;const{data:t}=await ta.getChatSend({id:e,content:a});setTimeout((()=>{r.avatar=t.avatar,r.id=t.id,r.name=t.name,r.time=t.time,i.push({...t.message}),w()}),2e3*Math.random()+500)})),j=U((async e=>{if(!e)return;const{data:a}=await ta.getChatRecord(e);r.avatar=a.avatar,r.id=a.id,r.name=a.name,r.time=a.time,i.splice(0,i.length,...a.message)}));return u((()=>E.currentRoute.value.params.id),(e=>{j(e)}),{immediate:!0}),(e,c)=>{const u=h,g=x,w=R,T=M;return a(),_(T,{class:"main-box-right-main2-main1"},{default:n((()=>[o("div",ba,[s(_a,{chatRecord:r},null,8,["chatRecord"]),(a(!0),t(v,null,f(i,(e=>(a(),t("div",{class:"chat-record-list-item",key:e.messageId,onMouseenter:a=>{return(t=e).isShow=!0,void("me"===t.messageFrom?y.value=!1:y.value=!0);var t},onMouseleave:a=>{return(t=e).isShow=!1,t.messageFrom,void(y.value=!1);var t}},[o("div",Ca,[s(u,{src:"self"===e.messageFrom?r.avatar:m(d).getUserAvatar},null,8,["src"])]),o("div",Ia,[o("div",Sa,[o("div",xa,[o("span",null,p(e.name||r.name),1),o("span",null,p(e.time),1)])]),o("div",wa,[o("p",null,[s(ea,{display:"me"!==e.messageFrom,mouseenter:y.value,mouseleave:S.value,item:e},{default:n((()=>[F(p(e.content),1)])),_:2},1032,["display","mouseenter","mouseleave","item"])])])])],40,ka)))),128))],512),i.length?b("",!0):(a(),t("div",Fa,[s(u,{src:"https://img.icons8.com/ios/452/nothing-found.png"}),Ra])),o("div",Ta,[k(o("input",{placeholder:`消息@${r.name}`,"onUpdate:modelValue":c[0]||(c[0]=e=>l.value=e),onClear:c[1]||(c[1]=e=>l.value=""),onKeydown:I(D,["enter"])},null,40,Ma),[[C,l.value]]),s(w,{type:"primary",onClick:D},{default:n((()=>[F("发送 "),s(g,null,{default:n((()=>[s(m(N))])),_:1})])),_:1})])])),_:1})}}}),[["__scopeId","data-v-4b725837"]]),La=V(e({__name:"index",setup:e=>(e,l)=>{const r=L,i=D,o=H,c=w;return a(),t("div",null,[s(c,null,{default:n((()=>[s(o,{class:"main-box-right-header2"},{default:n((()=>[s(i,null,{default:n((()=>[s(r,{span:15,class:"header-left"},{default:n((()=>[s($)])),_:1}),s(r,{span:8,class:"header-right"},{default:n((()=>[s(se)])),_:1})])),_:1})])),_:1}),s(i,{class:"main-box-right-main2"},{default:n((()=>[s(r,{span:17},{default:n((()=>[s(c,null,{default:n((()=>[s(Na)])),_:1})])),_:1}),s(r,{span:7,class:"aside-box-right"},{default:n((()=>[s(c,null,{default:n((()=>[s(Oe)])),_:1})])),_:1})])),_:1})])),_:1})])}}),[["__scopeId","data-v-f6fe874c"]]);var Da;export{La as default};
