import{o as e,c as t,r as n,E as s,a as i,d as a,b as r,e as o,f as d,g as l,h as c,n as u,w as p,i as f,j as m,p as h,k as g,l as _,m as y,q as v,t as L,F as R,s as E,u as P,v as b,x as O,y as F,z as T,A as x,B as j,C as w,D as I,G as k}from"./vendor-afd15978.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const D=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};const S=D({},[["render",function(s,i){const a=n("router-view");return e(),t(a)}]]);i.defaults.baseURL="/api-pro",i.defaults.timeout=1e4,i.defaults.headers["Content-Type"]="application/json;charset=UTF-8";const A=i.create({baseURL:"/api-pro",responseType:"json",transformResponse:[function(e){try{e=JSON.parse(e)}catch(t){}return e}]});A.interceptors.request.use((e=>(e.headers={...e.headers},e)),(e=>Promise.reject(e)));const M={404:new class{handle(e){const{message:t}=e.data;t&&s.error(t)}},112:new class{handle(e){s.error("Token expired")}},212:new class{handle(e){s.error("No permission")}}};A.interceptors.response.use((e=>{const{code:t}=e.data;if(0!==t){const n=M[t];null==n||n.handle(e)}return e}),(e=>{var t;return t=e.message,s.error(t),Promise.reject(e)}));const V=e=>new Promise(((t,n)=>{A.request(e).then((e=>{t(e.data)})).catch((e=>{}))})),q={get:(e,t={},n)=>V({url:e,params:t,...n,method:"GET"}),post:(e,t={},n)=>V({url:e,data:t,...n,method:"POST"}),put:(e,t={},n)=>V({url:e,data:t,...n,method:"PUT"}),delete:(e,t={},n)=>V({url:e,data:t,...n,method:"DELETE"}),upload:(e,t={},n)=>V({url:e,data:t,...n,method:"POST",headers:{"Content-Type":"multipart/form-data"}})};function U(e){return async function(...t){try{return await e(...t)}catch(n){return}}}function N(e){for(const t of Object.getOwnPropertyNames(e.prototype)){const n=Object.getOwnPropertyDescriptor(e.prototype,t);n&&"function"==typeof n.value&&(e.prototype[t]=U(n.value))}}var C=Object.defineProperty,B=Object.getOwnPropertyDescriptor;let W=class{async getUserFriends(){return await q.get("/user/friends")}async getUserFriendsPending(){return await q.get("/user/friends/pending")}};W=((e,t,n,s)=>{for(var i,a=s>1?void 0:s?B(t,n):t,r=e.length-1;r>=0;r--)(i=e[r])&&(a=(s?i(t,n,a):i(a))||a);return s&&a&&C(t,n,a),a})([N],W);const K=new W,$=a("friends",{state:()=>({friends:[],pendingFriends:[],pendingFriendsList:[],pendingFriendsRequestList:[],onlineFriendsList:[]}),getters:{handlePendingFriendsList:e=>(e.pendingFriendsList=e.pendingFriends.filter((e=>!e.isInitiative)).concat(e.pendingFriends.filter((e=>e.isInitiative))),e.pendingFriendsList),handlePendingFriendsRequestList:e=>(e.pendingFriendsRequestList=e.pendingFriends.filter((e=>!e.isInitiative)),e.pendingFriendsRequestList),handleOnlineFriendsList:e=>(e.onlineFriendsList=e.friends.filter((e=>"offline"!==e.status)),e.onlineFriendsList)},actions:{async getFriends(){const{data:e,code:t}=await K.getUserFriends();0===t&&(this.friends=e.friends||[])},async getPendingFriends(){const{data:e,code:t}=await K.getUserFriendsPending();0===t&&(this.pendingFriends=e.friends||[])}}}),G=a("privateLetter",{state:()=>({privateLetterCount:[]}),getters:{getPrivateLetterCount:e=>(e.privateLetterCount=$().handlePendingFriendsRequestList,e.privateLetterCount)},actions:{}}),z=r(),H={},J=function(e,t,n){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/future-front-end/"+e}(e))in H)return;H[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!n)for(let n=s.length-1;n>=0;n--){const i=s[n];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},Q=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:()=>J((()=>import("./index-0c40f6ca.js")),["assets/index-0c40f6ca.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-8d3fe13b.css"])},{path:"/login",name:"login",component:()=>J((()=>import("./index-131234e6.js")),["assets/index-131234e6.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-ddc41ddc.css"])},{path:"/main",name:"main",component:()=>J((()=>import("./index-b821b008.js")),["assets/index-b821b008.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-7a9eff76.js","assets/index-14f5d83f.css"]),children:[{path:"/main/@me",name:"message",components:{leftAside:()=>J((()=>import("./index-62d8863c.js")),["assets/index-62d8863c.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-7a9eff76.js","assets/index-d77e7fed.css"]),rightMain:()=>J((()=>import("./index-76bf0105.js")),["assets/index-76bf0105.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-a4a3d9d9.css"])}},{path:"/channels/:id",name:"channels",components:{leftAside:()=>J((()=>import("./index-9b5acb26.js")),["assets/index-9b5acb26.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css"]),rightMain:()=>J((()=>import("./index-76bf0105.js")),["assets/index-76bf0105.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-a4a3d9d9.css"])},props:!0},{path:"/main/@me",name:"friend",components:{leftAside:()=>J((()=>import("./index-62d8863c.js")),["assets/index-62d8863c.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-7a9eff76.js","assets/index-d77e7fed.css"]),rightMain:()=>J((()=>import("./index-76bf0105.js")),["assets/index-76bf0105.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-a4a3d9d9.css"])}},{path:"/main/store",name:"friend",components:{leftAside:()=>J((()=>import("./index-62d8863c.js")),["assets/index-62d8863c.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/index-7a9eff76.js","assets/index-d77e7fed.css"]),rightMain:()=>J((()=>import("./index-8d5e1a38.js")),["assets/index-8d5e1a38.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css"])}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>J((()=>import("./NotFound-ef1d9318.js")),["assets/NotFound-ef1d9318.js","assets/vendor-afd15978.js","assets/vendor-57947fe3.css","assets/NotFound-383f6438.css"])}],X=o({history:d("/future-front-end/"),routes:Q,scrollBehavior:()=>({left:0,top:0})});X.beforeEach(((e,t,n)=>{"/main"===e.path?n("/main/@me"):n()}));const Y=e=>(h("data-v-59a19988"),e=e(),g(),e),Z={class:"friendStatus"},ee=Y((()=>_("div",{class:"status-online"},null,-1))),te=Y((()=>_("div",{class:"status-idle"},null,-1))),ne=Y((()=>_("div",{class:"status-offline"},null,-1))),se=Y((()=>_("div",{class:"status-busy"},null,-1))),ie=D(l({__name:"FriendStatus",props:{status:{type:String,default:"online"},statusText:{type:String,default:""}},setup:n=>(s,i)=>{const a=m;return e(),c("div",Z,[n.statusText?"online"===n.status?(e(),t(a,{key:1,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[ee])),_:1},8,["content"])):"idle"===n.status?(e(),t(a,{key:2,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[te])),_:1},8,["content"])):"offline"===n.status?(e(),t(a,{key:3,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[ne])),_:1},8,["content"])):"busy"===n.status?(e(),t(a,{key:4,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[se])),_:1},8,["content"])):f("",!0):(e(),c("div",{key:0,class:u(["online"===n.status?"status-online":"idle"===n.status?"status-idle":"offline"===n.status?"status-offline":"status-busy"])},null,2))])}}),[["__scopeId","data-v-59a19988"]]),ae={class:"friends-avatar"},re={class:"friends-info"},oe={class:"friends-name"},de={class:"span-hover2"},le={key:0,class:"span-hover1"},ce=D(l({__name:"FriendList",props:{item:{type:Object,default:()=>({id:0,name:"",avatar:"",status:"online",isInitiative:!1})},statusMap:{type:Object,default:()=>({online:"在线",offline:"离线",busy:"忙碌",away:"离开"})},isInitiativeMap:{type:Object,default:()=>({true:"送出的好友请求",false:"收到好友请求"})},iconLeft:{type:String,default:""},iconRight:{type:String,default:""},status:{type:String,default:"ToBeDetermined"},statusProps:{type:Object,default:()=>({ToBeDetermined:{iconLeftMessage:"接受",iconRightMessage:"忽略"},all:{iconLeftMessage:"消息",iconRightMessage:"更多"}})}},setup:t=>(n,s)=>{var i;const a=E,r=ie,o=m;return e(),c(R,null,[_("div",ae,[y(a,{class:"avatar",src:t.item.avatar},null,8,["src"]),_("div",re,[_("div",oe,[v(L(t.item.name)+" ",1),_("p",null,"#"+L(t.item.id),1)]),_("div",{class:u([null==(i=t.statusMap)?void 0:i[t.item.status],"friends-status"])},L(t.statusMap[t.item.status]?t.statusMap[t.item.status]:t.isInitiativeMap[t.item.isInitiative]),3),y(r,{status:t.item.status},null,8,["status"])])]),t.iconLeft||t.iconRight?(e(),c("div",{key:0,class:u(["friends-more",{"deleteFriends addFriends":"ToBeDetermined"===t.status}])},[y(o,{class:"box-item","hide-after":50,enterable:!1,content:t.statusProps[t.status].iconLeftMessage,placement:"top"},{default:p((()=>[P(_("span",de,[_("i",{class:u(t.iconLeft)},null,2)],512),[[b,t.iconLeft&&!t.item.isInitiative]])])),_:1},8,["content"]),y(o,{"hide-after":50,enterable:!1,class:"box-item",content:t.statusProps[t.status].iconRightMessage,placement:"top"},{default:p((()=>[t.iconRight?(e(),c("span",le,[_("i",{class:u(t.iconRight)},null,2)])):f("",!0)])),_:1},8,["content"])],2)):f("",!0)],64)}}),[["__scopeId","data-v-9179d84e"]]),ue={class:"search-box-header-top",style:{width:"770px"}},pe={class:"search-box"},fe=(e=>(h("data-v-b4650ea5"),e=e(),g(),e))((()=>_("i",{class:"fa-solid fa-magnifying-glass"},null,-1))),me={class:"title-x4dI75 container-q97qHp"},he={key:0,class:"placeholder"},ge=D(l({__name:"FriendsDisplay",props:{titleText:{type:String,default:""},status:{type:String,default:"online"},list:{type:Array,default:()=>[]},iconLeft:{type:String,default:""},iconRight:{type:String,default:""}},setup(t){l({name:"FriendsDisplay",components:{Friend:ce}});const n=O(""),s={online:"在线",offline:"离线",busy:"忙碌",away:"离开"},i={true:"送出的好友请求",false:"收到好友请求"},a=()=>{};return(r,o)=>{const d=x;return e(),c(R,null,[_("div",ue,[_("div",pe,[y(d,{class:"search-box-input",modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),placeholder:"搜索",onKeyup:F(a,["enter","native"])},null,8,["modelValue","onKeyup"]),fe]),_("h2",me,L(t.titleText)+" — "+L(t.list.length),1)]),0===t.list.length?(e(),c("div",he)):(e(!0),c(R,{key:1},T(t.list,((n,a)=>(e(),c("div",{class:"friends-list",key:a,style:{width:"755px"}},[y(ce,{item:n,statusMap:s,isInitiativeMap:i,"icon-left":t.iconLeft,"icon-right":t.iconRight,status:t.status},null,8,["item","icon-left","icon-right","status"])])))),128))],64)}}}),[["__scopeId","data-v-b4650ea5"]]);const _e=j(S),ye=r();for(const[ve,Le]of Object.entries(w))_e.component(ve,Le);!function(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:a,onRegisterError:r}=e,o=O(!1),d=O(!1);(function(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:a,onRegisterError:r}=e;let o,d;d=async function(){if("serviceWorker"in navigator){const{Workbox:e}=await J((()=>import("./vendor-afd15978.js").then((e=>e.a9))),["assets/vendor-afd15978.js","assets/vendor-57947fe3.css"]);o=new e("/future-front-end/sw.js",{scope:"/future-front-end/",type:"classic"}),o.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),o.addEventListener("installed",(e=>{e.isUpdate||null==s||s()})),o.register({immediate:t}).then((e=>{a?a("/future-front-end/sw.js",e):null==i||i(e)})).catch((e=>{null==r||r(e)}))}}()})({immediate:t,onNeedRefresh(){o.value=!0,null==n||n()},onOfflineReady(){d.value=!0,null==s||s()},onRegistered:i,onRegisteredSW:a,onRegisterError:r})}(),_e.component("FriendStatus",ie),_e.component("FriendsDisplay",ge),ye.use(I),_e.use(k),_e.use(ye),_e.use(z),_e.use(X),_e.mount("#app");export{D as _,$ as a,ie as b,N as c,q as h,G as u};
