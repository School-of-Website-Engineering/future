import{E as e,a as t,d as s,b as n,o as a,c as r,e as i,r as o,f as d,g as l,h as c,i as u,n as p,w as f,j as m,k as g,p as h,l as y,m as _,t as v,q as I,s as w,u as L,v as F,x as R,y as b,z as P,A as E,F as O,B as S,C as j,D as k,G as T,H as x,I as D,J as A,K as C,L as U,M,N as V,O as $,P as N,Q as B,R as J,S as q}from"./vendor-25602d02.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),t.defaults.baseURL="/api-pro",t.defaults.timeout=1e4,t.defaults.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";const K=t.create({responseType:"json",transformResponse:[function(e){try{e=JSON.parse(e)}catch(t){}return e}]});K.interceptors.request.use((e=>(e.headers={...e.headers},e)),(e=>Promise.reject(e)));const W={404:new class{handle(t){const{reason:s,message:n}=t.data;s&&e.error(s),n&&e.error(n)}},112:new class{handle(t){e.error("Token 过期")}},212:new class{handle(t){e.error("无权限")}}};K.interceptors.response.use((e=>{const{code:t}=e.data;if(![0,"0",200,"200"].includes(t)){const s=W[t];null==s||s.handle(e)}return e}),(t=>{var s;return s=t.message,e.error(s),Promise.reject(t)}));const G=e=>new Promise(((t,s)=>{K.request(e).then((e=>{t(e.data)})).catch((e=>{}))})),z={get:(e,t={},s)=>G({url:e,params:t,...s,method:"GET"}),post:(e,t={},s)=>G({url:e,data:t,...s,method:"POST"}),put:(e,t={},s)=>G({url:e,data:t,...s,method:"PUT"}),delete:(e,t={},s)=>G({url:e,data:t,...s,method:"DELETE"}),upload:(e,t={},s)=>G({url:e,data:t,...s,method:"POST",headers:{"Content-Type":"multipart/form-data"}})};function H(e){return async function(...t){try{return await e(...t)}catch(s){throw e.name,s}}}function Q(e){for(const t of Object.getOwnPropertyNames(e.prototype)){const s=Object.getOwnPropertyDescriptor(e.prototype,t);s&&"function"==typeof s.value&&(e.prototype[t]=H(s.value))}return e}Object.defineProperty,Object.getOwnPropertyDescriptor;let X=class{async getUserFriends(){return await z.get("/user/friends")}async getUserFriendsPending(){return await z.get("/user/friends/pending")}async getUserFriendsBlocked(){return await z.get("/user/friends/blocked")}async getUserInfo(e){return await z.post("/relationships/getFriendByUserId2",{userId:e})}async getUserInfoByFriendId(e){return await z.get("/user/getFriendInfo",{friendId:e})}};X=((e,t,s,n)=>{for(var a,r=t,i=e.length-1;i>=0;i--)(a=e[i])&&(r=a(r)||r);return r})([Q],X);const Y=new X,Z=s("friends",{state:()=>({friends:[],pendingFriends:[],pendingFriendsList:[],pendingFriendsRequestList:[],onlineFriendsList:[],blockedFriends:[],friendInfo:{}}),getters:{handlePendingFriendsList:e=>(e.pendingFriendsList=e.pendingFriends.filter((e=>!e.isInitiative)).concat(e.pendingFriends.filter((e=>e.isInitiative))),e.pendingFriendsList),handlePendingFriendsRequestList:e=>(e.pendingFriendsRequestList=e.pendingFriends.filter((e=>!e.isInitiative)),e.pendingFriendsRequestList),handleOnlineFriendsList:e=>(e.onlineFriendsList=e.friends.filter((e=>"offline"!==e.status)),e.onlineFriendsList)},actions:{async getFriends(){const{data:e,code:t}=await Y.getUserFriends();0===t&&(this.friends=e.friends||[])},async getPendingFriends(){const{data:e,code:t}=await Y.getUserFriendsPending();0===t&&(this.pendingFriends=e.friends||[])},async getBlockedFriends(){const{data:e,code:t}=await Y.getUserFriendsBlocked();0===t&&(this.blockedFriends=e.friends||[])},async getFriendInfo(e){const{data:t,code:s}=await Y.getUserInfoByFriendId(e);200===s&&(this.friendInfo=t.friendInfo)}}}),ee=n({__name:"App",setup(e){const t=Z();return a((()=>{t.getPendingFriends()})),(e,t)=>{const s=o("router-view");return i(),r(s)}}}),te=s("privateLetter",{state:()=>({privateLetterCount:[]}),getters:{getPrivateLetterCount:e=>(e.privateLetterCount=Z().handlePendingFriendsRequestList,e.privateLetterCount)},actions:{}});Object.defineProperty,Object.getOwnPropertyDescriptor;let se=class{async getLogin(e){const{username:t,password:s,userEmail:n,smsCode:a}=e;return await z.post("/auth/login",{username:t,password:s,userEmail:n,smsCode:a})}async getSmsCode(e){return await z.post("/auth/verify-code",{email:e})}async getLogout(){return await z.post("/auth/logout")}async getRegister(e){const{username:t,password:s,email:n,smsCode:a,role:r}=e;return await z.post("/auth/register",{username:t,password:s,email:n,smsCode:a,role:r})}};se=((e,t,s,n)=>{for(var a,r=t,i=e.length-1;i>=0;i--)(a=e[i])&&(r=a(r)||r);return r})([Q],se);const ne=new se,ae={},re=function(e,t,s){if(!t||0===t.length)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e="/future-front-end/"+e)in ae)return;ae[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(s)for(let s=n.length-1;s>=0;s--){const a=n[s];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},ie=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:()=>re((()=>import("./index-70ebdcd9.js")),["assets/index-70ebdcd9.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-2ed947a9.css"])},{path:"/login",name:"login",component:()=>re((()=>import("./index-2578ed98.js")),["assets/index-2578ed98.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-fc7febe0.css"])},{path:"/main",name:"main",component:()=>re((()=>import("./index-61a0a4ab.js")),["assets/index-61a0a4ab.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-4f7d6dc1.js","assets/index-94c34ac0.css"]),children:[{path:"/main/@me",name:"message",components:{leftAside:()=>re((()=>import("./index-aede7485.js")),["assets/index-aede7485.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-4f7d6dc1.js","assets/index-0af3cb91.css"]),rightMain:()=>re((()=>import("./index-2841ad13.js")),["assets/index-2841ad13.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-ff36b1ed.css"])}},{path:"/main/@me/:id",name:"chat",components:{leftAside:()=>re((()=>import("./index-aede7485.js")),["assets/index-aede7485.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-4f7d6dc1.js","assets/index-0af3cb91.css"]),rightMain:()=>re((()=>import("./index-81312c78.js")),["assets/index-81312c78.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-0bda09fa.css"])},props:!0},{path:"/channels/:id",name:"channels",components:{leftAside:()=>re((()=>import("./index-e2e62b99.js")),["assets/index-e2e62b99.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css"]),rightMain:()=>re((()=>import("./index-2841ad13.js")),["assets/index-2841ad13.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-ff36b1ed.css"])},props:!0},{path:"/main/@me",name:"friend",components:{leftAside:()=>re((()=>import("./index-aede7485.js")),["assets/index-aede7485.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-4f7d6dc1.js","assets/index-0af3cb91.css"]),rightMain:()=>re((()=>import("./index-2841ad13.js")),["assets/index-2841ad13.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-ff36b1ed.css"])}},{path:"/main/store",name:"friend",components:{leftAside:()=>re((()=>import("./index-aede7485.js")),["assets/index-aede7485.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/index-4f7d6dc1.js","assets/index-0af3cb91.css"]),rightMain:()=>re((()=>import("./index-ba3f8311.js")),["assets/index-ba3f8311.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css"])}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>re((()=>import("./NotFound-fbdb5b2f.js")),["assets/NotFound-fbdb5b2f.js","assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css","assets/NotFound-383f6438.css"])}],oe=d({history:l("/future-front-end"),routes:ie,scrollBehavior:()=>({left:0,top:0})});oe.beforeEach(((e,t,s)=>{"/main"===e.path?s("/main/@me"):s()}));const de={getItem(e){const t=localStorage.getItem(e);if(t){const{value:s,expires:n}=JSON.parse(t);return!n||n>=Date.now()?s:(this.removeItem(e),null)}return null},setItem(e,t,s=86400){this.removeItem(e);const n=s&&Date.now()+1e3*s;localStorage.setItem(e,JSON.stringify({value:t,expires:n}))},removeItem(e){localStorage.removeItem(e)},clear(){localStorage.clear()}};Object.defineProperty,Object.getOwnPropertyDescriptor;let le=class{async getCurrentUser(){return await z.get("/userFriends/getCurrentUser")}async getCommonServerCount(e){return await z.get("/userFriends/getCommonServerCount",{friendId:e})}};le=((e,t,s,n)=>{for(var a,r=t,i=e.length-1;i>=0;i--)(a=e[i])&&(r=a(r)||r);return r})([Q],le);const ce=new le,ue=s("user",{state:()=>({user:{},userInfo:{}}),getters:{getUserId(){return this.user.id},getUserAvatar(){return this.userInfo.avatar}},actions:{async userLogin(t){const{code:s,reason:n}=await ne.getLogin(t);200===s?(await oe.push("main"),de.setItem("userId",this.user.id)):e.error(n)},async getUserInfo(){const{code:t,reason:s,data:n}=await ce.getCurrentUser();200===t?this.userInfo=n:e.error(s)}}}),pe=c(),fe=e=>(h("data-v-ac10497e"),e=e(),y(),e),me={class:"friendStatus"},ge=fe((()=>_("div",{class:"status-online"},null,-1))),he=fe((()=>_("div",{class:"status-idle"},null,-1))),ye=fe((()=>_("div",{class:"status-offline"},null,-1))),_e=fe((()=>_("div",{class:"status-busy"},null,-1))),ve=(e,t)=>{const s=e.__vccOpts||e;for(const[n,a]of t)s[n]=a;return s},Ie=ve(n({__name:"FriendStatus",props:{status:{type:String,default:"online"},statusText:{type:String,default:""}},setup(e){const t=e;return(s,n)=>{const a=g;return i(),u("div",me,[t.statusText?"online"===e.status?(i(),r(a,{key:1,"hide-after":50,enterable:!1,effect:"dark",content:t.statusText,placement:"top"},{default:f((()=>[ge])),_:1},8,["content"])):"idle"===e.status?(i(),r(a,{key:2,"hide-after":50,enterable:!1,effect:"dark",content:t.statusText,placement:"top"},{default:f((()=>[he])),_:1},8,["content"])):"offline"===e.status?(i(),r(a,{key:3,"hide-after":50,enterable:!1,effect:"dark",content:t.statusText,placement:"top"},{default:f((()=>[ye])),_:1},8,["content"])):"busy"===e.status?(i(),r(a,{key:4,"hide-after":50,enterable:!1,effect:"dark",content:t.statusText,placement:"top"},{default:f((()=>[_e])),_:1},8,["content"])):m("",!0):(i(),u("div",{key:0,class:p(["online"===e.status?"status-online":"idle"===e.status?"status-idle":"offline"===e.status?"status-offline":"status-busy"])},null,2))])}}}),[["__scopeId","data-v-ac10497e"]]),we={class:"friends-avatar"},Le={class:"friends-info"},Fe={class:"friends-name"},Re=ve({__name:"FriendList",props:{item:{type:Object,default:()=>({id:0,name:"",avatar:"",status:"online",isInitiative:!1})},statusMap:Object,isInitiativeMap:Object,iconLeft:{type:String,default:""},iconRight:{type:String,default:""},status:{type:String,default:""}},setup(e){const t=e,{item:s,statusMap:n,isInitiativeMap:a,iconLeft:o,iconRight:d,status:l}=v(t),c={ToBeDetermined:{iconLeftMessage:"接受",iconRightMessage:"忽略"},all:{iconLeftMessage:"消息",iconRightMessage:"更多"},blocked:{iconRightMessage:"解除屏蔽"}},h=I((()=>({...c,[l.value]:c[l.value]})));w({STATUS_PROPS:c});const y=e=>{e.stopPropagation()},j=e=>{y(e)},k=e=>{y(e)};return(e,t)=>{var s,c;const y=S,v=Ie,I=g;return i(),u(O,null,[_("div",we,[L(y,{class:"avatar",src:e.$props.item.avatar},null,8,["src"]),_("div",Le,[_("div",Fe,[F(R(e.$props.item.name)+" ",1),_("p",null,"#"+R(e.$props.item.id),1)]),_("div",{class:p([b(n)[e.$props.status]&&b(n)[e.$props.status],"friends-status"])},R(b(n)[e.$props.item.status]?b(n)[e.$props.item.status]:b(a)[e.$props.item.isInitiative]?b(a)[e.$props.item.isInitiative]:"已屏蔽"),3),"blocked"!==b(l)?(i(),r(v,{status:e.$props.status,key:e.$props.status},null,8,["status"])):m("",!0)])]),b(o)||b(d)?(i(),u("div",{key:0,class:p(["friends-more",{"deleteFriends addFriends":"ToBeDetermined"===e.$props.status||"blocked"===e.$props.status}])},[L(I,{class:"box-item","hide-after":50,enterable:!1,content:null==(s=b(h)[e.$props.status])?void 0:s.iconLeftMessage,placement:"top"},{default:f((()=>[P(_("span",{class:"span-hover2",onClick:k},[_("i",{class:p(b(o))},null,2)],512),[[E,b(o)&&!e.$props.item.isInitiative]])])),_:1},8,["content"]),L(I,{"hide-after":50,enterable:!1,class:"box-item",content:null==(c=b(h)[e.$props.status])?void 0:c.iconRightMessage,placement:"top"},{default:f((()=>[b(d)?(i(),u("span",{key:0,class:"span-hover1",onClick:j},[_("i",{class:p(b(d))},null,2)])):m("",!0)])),_:1},8,["content"])],2)):m("",!0)],64)}}},[["__scopeId","data-v-2c9913ae"]]),be={class:"search-box-header-top",style:{width:"770px"}},Pe={class:"search-box"},Ee=(Te=()=>_("i",{class:"fa-solid fa-magnifying-glass"},null,-1),h("data-v-e387fe31"),Te=Te(),y(),Te),Oe={class:"title-x4dI75 container-q97qHp"},Se={key:0,class:"placeholder"},je=["onClick"],ke=ve(n({__name:"FriendsDisplay",props:{titleText:{type:String,default:""},status:{type:String,default:"online"},list:{type:Array,default:()=>[]},iconLeft:{type:String,default:""},iconRight:{type:String,default:""}},setup(e){const t=e,s=j(""),a=j(!1),r=[{date:"2016-05-02",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"},{date:"2016-05-04",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"},{date:"2016-05-01",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"},{date:"2016-05-03",name:"John Smith",address:"No.1518,  Jinshajiang Road, Putuo District"}];n({name:"FriendsDisplay",components:{Friend:Re}});const o={online:"在线",offline:"离线",busy:"忙碌",away:"离开"},d={true:"送出的好友请求",false:"收到好友请求"},l=()=>{},c=H((async e=>{["addFriend","blocked","ToBeDetermined"].includes(t.status)?a.value=!0:await oe.push(`/main/@me/${e.id}`)}));return(e,n)=>{const p=x,m=A,g=C,h=D;return i(),u(O,null,[_("div",be,[_("div",Pe,[L(p,{class:"search-box-input",modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),placeholder:"搜索",onKeyup:k(l,["enter","native"])},null,8,["modelValue","onKeyup"]),Ee]),_("h2",Oe,R(t.titleText)+" — "+R(t.list.length),1)]),0===t.list.length?(i(),u("div",Se)):(i(!0),u(O,{key:1},T(t.list,((e,s)=>(i(),u("div",{class:"friends-list",key:s,onClick:t=>b(c)(e),style:{width:"755px"}},[L(Re,{item:e,statusMap:o,isInitiativeMap:d,"icon-left":t.iconLeft,"icon-right":t.iconRight,status:t.status},null,8,["item","icon-left","icon-right","status"])],8,je)))),128)),L(h,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e),title:"Shipping address"},{default:f((()=>[L(g,{data:r},{default:f((()=>[L(m,{property:"date",label:"Date",width:"150"}),L(m,{property:"name",label:"Name",width:"200"}),L(m,{property:"address",label:"Address"})])),_:1})])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-e387fe31"]]);var Te;const xe=U({apiKey:"AIzaSyDfzMWKXSeigISCfxGNn2oQkfKGxPnrFbs",authDomain:"future-57777.firebaseapp.com",projectId:"future-57777",storageBucket:"future-57777.appspot.com",messagingSenderId:"75290776669",appId:"1:75290776669:web:9ae574d357c5da453429b4",measurementId:"G-962YJMSFBG"});M(xe),V(xe);const De=$(ee),Ae=c();for(const[Ce,Ue]of Object.entries(N))De.component(Ce,Ue);!function(e={}){const{immediate:t=!0,onNeedRefresh:s,onOfflineReady:n,onRegistered:a,onRegisteredSW:r,onRegisterError:i}=e,o=j(!1),d=j(!1);!function(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:n,onRegistered:a,onRegisteredSW:r,onRegisterError:i}=e;let o,d;d=async function(){if("serviceWorker"in navigator){const{Workbox:e}=await re((()=>import("./vendor-25602d02.js").then((e=>e.aj))),["assets/vendor-25602d02.js","assets/vendor-b8bc4daa.css"]);o=new e("/future-front-end/sw.js",{scope:"/future-front-end/",type:"classic"}),o.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),o.addEventListener("installed",(e=>{e.isUpdate||null==n||n()})),o.register({immediate:t}).then((e=>{r?r("/future-front-end/sw.js",e):null==a||a(e)})).catch((e=>{null==i||i(e)}))}}()}({immediate:t,onNeedRefresh(){o.value=!0,null==s||s()},onOfflineReady(){d.value=!0,null==n||n()},onRegistered:a,onRegisteredSW:r,onRegisterError:i})}(),De.component("FriendStatus",Ie),De.component("FriendsDisplay",ke),Ae.use(B),De.use(Ae),De.use(pe),De.use(oe),De.use(J,{locale:q}),De.mount("#app");export{Ie as F,ne as L,Y as U,ve as _,H as a,te as b,Z as c,Q as d,ce as e,z as h,oe as r,ue as u};
