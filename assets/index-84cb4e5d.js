import{o as e,c as t,r as n,E as s,a,d as r,b as i,e as o,f as l,g as d,h as c,n as u,w as p,i as f,j as m,p as h,k as g,l as _,m as y,q as v,s as E,t as L,F as R,u as b,v as O,x as P,y as T,z as x,A as w,B as j,C as F,D as k,G as D}from"./vendor-7d585b9b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const A=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n};const I=A({},[["render",function(s,a){const r=n("router-view");return e(),t(r)}]]);function S(e){return async function(...t){try{return await e(...t)}catch(n){return}}}function V(e){for(const t of Object.getOwnPropertyNames(e.prototype)){const n=Object.getOwnPropertyDescriptor(e.prototype,t);n&&"function"==typeof n.value&&(e.prototype[t]=S(n.value))}}a.defaults.baseURL="/api-pro",a.defaults.timeout=1e4,a.defaults.headers["Content-Type"]="application/json;charset=UTF-8";const U=a.create({baseURL:"/api-pro",responseType:"json",transformResponse:[function(e){try{e=JSON.parse(e)}catch(t){}return e}]});U.interceptors.request.use((e=>(e.headers={...e.headers},e)),(e=>Promise.reject(e)));const M={404:new class{handle(e){const{message:t}=e.data;t&&s.error(t)}},112:new class{handle(e){s.error("Token expired")}},212:new class{handle(e){s.error("No permission")}}};U.interceptors.response.use((e=>{const{code:t}=e.data;if(0!==t){const n=M[t];null==n||n.handle(e)}return e}),(e=>{var t;return t=e.message,s.error(t),Promise.reject(e)}));const N=e=>new Promise(((t,n)=>{U.request(e).then((e=>{t(e.data)})).catch((e=>{}))})),q={get:(e,t={},n)=>N({url:e,params:t,...n,method:"GET"}),post:(e,t={},n)=>N({url:e,data:t,...n,method:"POST"}),put:(e,t={},n)=>N({url:e,data:t,...n,method:"PUT"}),delete:(e,t={},n)=>N({url:e,data:t,...n,method:"DELETE"}),upload:(e,t={},n)=>N({url:e,data:t,...n,method:"POST",headers:{"Content-Type":"multipart/form-data"}})};var W=Object.defineProperty,B=Object.getOwnPropertyDescriptor;let C=class{async getUserLogin(e){return await q.get("/api/userTset/login",e)}};C=((e,t,n,s)=>{for(var a,r=s>1?void 0:s?B(t,n):t,i=e.length-1;i>=0;i--)(a=e[i])&&(r=(s?a(t,n,r):a(r))||r);return s&&r&&W(t,n,r),r})([V],C);const K=new C,$=r("user",{state:()=>({username:"",token:""}),getters:{hello:e=>"Hello!"+e.username},actions:{async login(e){await K.getUserLogin(e)},logout(){this.token="",this.username=""}}});var G=Object.defineProperty,H=Object.getOwnPropertyDescriptor;let z=class{async getUserFriends(){return await q.get("/user/friends")}async getUserFriendsPending(){return await q.get("/user/friends/pending")}};z=((e,t,n,s)=>{for(var a,r=s>1?void 0:s?H(t,n):t,i=e.length-1;i>=0;i--)(a=e[i])&&(r=(s?a(t,n,r):a(r))||r);return s&&r&&G(t,n,r),r})([V],z);const J=new z,Q=r("menu",{state:()=>({friends:[],pendingFriends:[],pendingFriendsList:[]}),getters:{handlePendingFriendsList:e=>(e.pendingFriendsList=e.pendingFriends.filter((e=>!e.isInitiative)).concat(e.pendingFriends.filter((e=>e.isInitiative))),e.pendingFriendsList)},actions:{async getFriends(){const{data:e,code:t}=await J.getUserFriends();0===t&&(this.friends=e.friends||[])},async getPendingFriends(){const{data:e,code:t}=await J.getUserFriendsPending();0===t&&(this.pendingFriends=e.friends||[],this.handlePendingFriendsList)}}}),X=i(),Y={},Z=function(e,t,n){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/future-front-end/"+e}(e))in Y)return;Y[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(!!n)for(let n=s.length-1;n>=0;n--){const a=s[n];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},ee=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:()=>Z((()=>import("./index-0ee1fca7.js")),["assets/index-0ee1fca7.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-8d3fe13b.css"])},{path:"/login",name:"login",component:()=>Z((()=>import("./index-e3625971.js")),["assets/index-e3625971.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-ddc41ddc.css"])},{path:"/main",name:"main",component:()=>Z((()=>import("./index-15415a89.js")),["assets/index-15415a89.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-e0d2f393.js","assets/index-a1210abf.css"]),children:[{path:"/main/@me",name:"message",components:{leftAside:()=>Z((()=>import("./index-d9ed1281.js")),["assets/index-d9ed1281.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-e0d2f393.js","assets/index-6a95c271.css"]),rightMain:()=>Z((()=>import("./index-6d74e77e.js")),["assets/index-6d74e77e.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-527bef9d.css"])}},{path:"/channels/:id",name:"channels",components:{leftAside:()=>Z((()=>import("./index-7eba0798.js")),["assets/index-7eba0798.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css"]),rightMain:()=>Z((()=>import("./index-6d74e77e.js")),["assets/index-6d74e77e.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-527bef9d.css"])},props:!0},{path:"/main/@me",name:"friend",components:{leftAside:()=>Z((()=>import("./index-d9ed1281.js")),["assets/index-d9ed1281.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-e0d2f393.js","assets/index-6a95c271.css"]),rightMain:()=>Z((()=>import("./index-6d74e77e.js")),["assets/index-6d74e77e.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-527bef9d.css"])}},{path:"/main/store",name:"friend",components:{leftAside:()=>Z((()=>import("./index-d9ed1281.js")),["assets/index-d9ed1281.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/index-e0d2f393.js","assets/index-6a95c271.css"]),rightMain:()=>Z((()=>import("./index-5950bd88.js")),["assets/index-5950bd88.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css"])}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Z((()=>import("./NotFound-cac816df.js")),["assets/NotFound-cac816df.js","assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css","assets/NotFound-383f6438.css"])}],te=o({history:l("/future-front-end/"),routes:ee,scrollBehavior:()=>({left:0,top:0})});te.beforeEach(((e,t,n)=>{"/main"===e.path?n("/main/@me"):n()}));const ne=e=>(h("data-v-b81a67e1"),e=e(),g(),e),se={class:"friendStatus"},ae=ne((()=>_("div",{class:"status-online"},null,-1))),re=ne((()=>_("div",{class:"status-idle"},null,-1))),ie=ne((()=>_("div",{class:"status-offline"},null,-1))),oe=ne((()=>_("div",{class:"status-busy"},null,-1))),le=A(d({__name:"FriendStatus",props:{status:{type:String,default:"online"},statusText:{type:String,default:""}},setup:n=>(s,a)=>{const r=m;return e(),c("div",se,[n.statusText?"online"===n.status?(e(),t(r,{key:1,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[ae])),_:1},8,["content"])):"idle"===n.status?(e(),t(r,{key:2,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[re])),_:1},8,["content"])):"offline"===n.status?(e(),t(r,{key:3,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[ie])),_:1},8,["content"])):"busy"===n.status?(e(),t(r,{key:4,"hide-after":50,enterable:!1,effect:"dark",content:n.statusText,placement:"top"},{default:p((()=>[oe])),_:1},8,["content"])):f("",!0):(e(),c("div",{key:0,class:u(["online"===n.status?"status-online":"idle"===n.status?"status-idle":"offline"===n.status?"status-offline":"status-busy"])},null,2))])}}),[["__scopeId","data-v-b81a67e1"]]),de=e=>(h("data-v-5bd0f192"),e=e(),g(),e),ce={class:"search-box-header-top",style:{width:"770px"}},ue={class:"search-box"},pe=de((()=>_("i",{class:"fa-solid fa-magnifying-glass"},null,-1))),fe={class:"title-x4dI75 container-q97qHp"},me=de((()=>_("div",{class:"placeholder"},null,-1))),he={class:"friends-avatar"},ge={class:"friends-info"},_e={class:"friends-name"},ye={class:"span-hover2"},ve={key:0,class:"span-hover1"},Ee=A(d({__name:"FriendsDisplay",props:{titleText:{type:String,default:""},status:{type:String,default:"online"},list:{type:Array,default:()=>[]},iconLeft:{type:String,default:""},iconRight:{type:String,default:""}},setup(t){d({name:"FriendsDisplay"});const n={ToBeDetermined:{iconLeftMessage:"接受",iconRightMessage:"忽略"},all:{iconLeftMessage:"消息",iconRightMessage:"更多"}},s={online:"在线",offline:"离线",busy:"忙碌",away:"离开"},a=()=>{},r=y("");return(i,o)=>{const l=O,d=w,h=le,g=m;return e(),c(R,null,[_("div",ce,[_("div",ue,[v(l,{class:"search-box-input",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),placeholder:"搜索",onKeyup:E(a,["enter","native"])},null,8,["modelValue","onKeyup"]),pe]),_("h2",fe,L(t.titleText)+" — "+L(t.list.length),1)]),me,(e(!0),c(R,null,b(t.list,((a,r)=>(e(),c("div",{class:"friends-list",key:r,style:{width:"755px"}},[_("div",he,[v(d,{class:"avatar",src:a.avatar},null,8,["src"]),_("div",ge,[_("div",_e,[P(L(a.name)+" ",1),_("p",null,"#"+L(a.id),1)]),_("div",{class:u([s[a.status],"friends-status"])},L(s[a.status]),3),v(h,{status:a.status},null,8,["status"])])]),t.iconLeft||t.iconRight?(e(),c("div",{key:0,class:u(["friends-more",{"deleteFriends addFriends":"ToBeDetermined"===t.status}])},[v(g,{"hide-after":50,enterable:!1,class:"box-item",content:n[t.status].iconLeftMessage,placement:"top"},{default:p((()=>[T(_("span",ye,[_("i",{class:u(t.iconLeft)},null,2)],512),[[x,t.iconLeft&&a.isInitiative]])])),_:2},1032,["content"]),v(g,{"hide-after":50,enterable:!1,class:"box-item",content:n[t.status].iconRightMessage,placement:"top"},{default:p((()=>[t.iconRight?(e(),c("span",ve,[_("i",{class:u(t.iconRight)},null,2)])):f("",!0)])),_:1},8,["content"])],2)):f("",!0)])))),128))],64)}}}),[["__scopeId","data-v-5bd0f192"]]);const Le=j(I),Re=i();for(const[be,Oe]of Object.entries(F))Le.component(be,Oe);!function(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:s,onRegistered:a,onRegisteredSW:r,onRegisterError:i}=e,o=y(!1),l=y(!1);(function(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:a,onRegisteredSW:r,onRegisterError:i}=e;let o,l;l=async function(){if("serviceWorker"in navigator){const{Workbox:e}=await Z((()=>import("./vendor-7d585b9b.js").then((e=>e.a9))),["assets/vendor-7d585b9b.js","assets/vendor-6d5d5ca5.css"]);o=new e("/future-front-end/sw.js",{scope:"/future-front-end/",type:"classic"}),o.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),o.addEventListener("installed",(e=>{e.isUpdate||null==s||s()})),o.register({immediate:t}).then((e=>{r?r("/future-front-end/sw.js",e):null==a||a(e)})).catch((e=>{null==i||i(e)}))}}()})({immediate:t,onNeedRefresh(){o.value=!0,null==n||n()},onOfflineReady(){l.value=!0,null==s||s()},onRegistered:a,onRegisteredSW:r,onRegisterError:i})}(),Le.component("FriendStatus",le),Le.component("FriendsDisplay",Ee),Re.use(k),Le.use(D),Le.use(Re),Le.use(X),Le.use(te),Le.mount("#app");export{Ee as F,A as _,le as a,$ as b,V as c,q as h,Q as u};
