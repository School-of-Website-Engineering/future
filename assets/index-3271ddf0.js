import{b as e,e as a,i as t,u as s,w as l,k as n,p as d,l as r,m as o,ac as i,c,v as u,a9 as m,C as v,ag as p,j as f,z as h,V as _,D as g,U as C,_ as b,a4 as y,s as k,x,W as w,o as R,G as I,y as S,F as M,ah as F,ai as H,a5 as j,a6 as V,a7 as L}from"./vendor-25602d02.js";import{F as U,_ as B,c as E,r as O,h as z,d as A,a as D,e as K,u as P}from"./index-0c79507d.js";const Z=e=>(d("data-v-b70f776a"),e=e(),r(),e),$={class:"header-left-left"},q=Z((()=>o("svg",{x:"0",y:"0",class:"icon-2xnN2Y","aria-hidden":"true",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},[o("path",{fill:"currentColor",d:"M12 2C6.486 2 2 6.486 2 12C2 17.515 6.486 22 12 22C14.039 22 15.993 21.398 17.652 20.259L16.521 18.611C15.195 19.519 13.633 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4C16.411 4 20 7.589 20 12V12.782C20 14.17 19.402 15 18.4 15L18.398 15.018C18.338 15.005 18.273 15 18.209 15H18C17.437 15 16.6 14.182 16.6 13.631V12C16.6 9.464 14.537 7.4 12 7.4C9.463 7.4 7.4 9.463 7.4 12C7.4 14.537 9.463 16.6 12 16.6C13.234 16.6 14.35 16.106 15.177 15.313C15.826 16.269 16.93 17 18 17L18.002 16.981C18.064 16.994 18.129 17 18.195 17H18.4C20.552 17 22 15.306 22 12.782V12C22 6.486 17.514 2 12 2ZM12 14.599C10.566 14.599 9.4 13.433 9.4 11.999C9.4 10.565 10.566 9.399 12 9.399C13.434 9.399 14.6 10.565 14.6 11.999C14.6 13.433 13.434 14.599 12 14.599Z"})],-1))),G=Z((()=>o("span",null,"JDSA Ling",-1))),J=B(e({__name:"HeaderLeft",setup:e=>(e,d)=>{const r=n;return a(),t("div",$,[q,G,s(r,{"hide-after":0,enterable:!1,effect:"dark",content:"在线",placement:"bottom"},{default:l((()=>[s(U)])),_:1})])}}),[["__scopeId","data-v-b70f776a"]]),N=e=>(d("data-v-84ae6dba"),e=e(),r(),e),W={class:"header-right-right"},Y=N((()=>o("span",null,[o("i",{class:"fa-solid fa-phone-volume"})],-1))),Q=N((()=>o("span",null,[o("i",{class:"fa-solid fa-video"})],-1))),T=N((()=>o("span",null,[o("i",{class:"fa-solid fa-user-plus"})],-1))),X=N((()=>o("div",{class:"search-box"},[o("input",{type:"text",placeholder:"搜索"}),o("i",{class:"fa-solid fa-search"})],-1))),ee=N((()=>o("span",null,[o("i",{class:"fa-solid fa-inbox"})],-1))),ae=N((()=>o("span",null,[o("i",{class:"fa-solid fa-circle-question"})],-1))),te=B({},[["render",function(e,d){const r=n;return a(),t("div",W,[s(r,{"hide-after":0,class:"box-item",effect:"dark",content:"语音通话",placement:"bottom-end"},{default:l((()=>[Y])),_:1}),s(r,{"hide-after":0,enterable:!1,effect:"dark",content:"视频通话",placement:"bottom"},{default:l((()=>[Q])),_:1}),s(r,{"hide-after":0,enterable:!1,effect:"dark",content:"添加好友",placement:"bottom"},{default:l((()=>[T])),_:1}),X,s(r,{"hide-after":0,enterable:!1,effect:"dark",content:"设置",placement:"bottom"},{default:l((()=>[ee])),_:1}),s(r,{"hide-after":0,enterable:!1,effect:"dark",content:"帮助",placement:"bottom"},{default:l((()=>[ae])),_:1})])}],["__scopeId","data-v-84ae6dba"]]),se=B(e({__name:"AsideRight",setup(e){const t=E();return i((()=>O.currentRoute.value.params.id),(e=>{t.getFriendInfo(e)}),{immediate:!0}),(e,t)=>{const s=m;return a(),c(s,{class:"main-box-right-main2-main2"},{default:l((()=>[u("Main")])),_:1})}}}),[["__scopeId","data-v-904a62c0"]]),le={class:"hover-edit-wrapper"},ne={key:0,class:"hover-edit-wrapper-content"},de=(me=()=>o("i",{class:"fa-solid fa-pencil"},null,-1),d("data-v-0fecb65d"),me=me(),r(),me),re={key:0,class:"is-edit"},oe={key:1,class:"input-container"},ie={class:"keyboard-tips"},ce=["onKeydown"],ue=B(e({__name:"HoverEdit",props:{display:{type:Boolean,default:!1},mouseenter:{type:Boolean,default:!1},mouseleave:{type:Boolean,default:!0},item:{type:Object,default:null}},setup(d){const r=d,i=v(!1),u=v("");v(!1),e({name:"HoverEdit"});const m=()=>{var e;u.value=null==(e=r.item)?void 0:e.content,i.value=!0},k=()=>{i.value=!1,r.item.content=u.value,r.item.isEdit=!0};return(e,d)=>{var v;const x=b,w=y,R=n;return a(),t("div",le,[i.value?f("",!0):(a(),t("div",ne,[p(e.$slots,"default",{},void 0,!0),s(R,{effect:"dark",content:"编辑",placement:"top","hide-after":0,"open-delay":50},{default:l((()=>[s(w,{class:"hover-edit-wrapper-content-edit"},{default:l((()=>{var e;return[r.display&&r.mouseenter&&(null==(e=r.item)?void 0:e.isShow)?(a(),c(x,{key:0,onClick:m},{default:l((()=>[de])),_:1})):f("",!0)]})),_:1})])),_:1}),(null==(v=r.item)?void 0:v.isEdit)?(a(),t("p",re,"(已编辑)")):f("",!0)])),i.value?(a(),t("div",oe,[h(o("textarea",{class:"edit-input",type:"text","onUpdate:modelValue":d[0]||(d[0]=e=>u.value=e)},null,512),[[_,u.value]]),o("div",ie,[o("span",{class:"edit-input-key",onKeydown:d[1]||(d[1]=g(C((e=>i.value=!1),["stop"]),["esc"])),onClick:d[2]||(d[2]=e=>i.value=!1)},"取消",32),o("span",{class:"edit-input-key",onKeydown:g(k,["enter"]),onClick:k},"保存",40,ce)])])):f("",!0)])}}}),[["__scopeId","data-v-0fecb65d"]]);var me;Object.defineProperty,Object.getOwnPropertyDescriptor;let ve=class{async getChatRecord(e){return await z.get("/chat/"+e)}};ve=((e,a,t,s)=>{for(var l,n=a,d=e.length-1;d>=0;d--)(l=e[d])&&(n=l(n)||n);return n})([A],ve);const pe=new ve,fe=e=>(d("data-v-bde57c9c"),e=e(),r(),e),he={class:"chat-head"},_e={class:"chat-head-left"},ge={class:"chat-head-left-avatar"},Ce=["src"],be={class:"chat-head-left-name"},ye={class:"chat-head-right"},ke={class:"chat-head-right-right"},xe={class:"text"},we=fe((()=>o("span",null,"这是您与 ",-1))),Re=fe((()=>o("span",null," 私信记录的开头",-1))),Ie={class:"info"},Se=fe((()=>o("span",null,null,-1))),Me={key:0},Fe={key:1},He={class:"button"},je=B(e({__name:"ChatHead",props:{chatRecord:null},setup(n){const d=n,r=k({commonServer:[{id:"",name:"",icon:""}],commonFriend:[{id:"",name:"",avatar:""}]});e({name:"ChatHead"}),i((()=>d.chatRecord.id),(()=>{c()}));const c=D((async()=>{const{data:e}=await K.getCommonServerCount(d.chatRecord.id);r.commonServer=e?e.commonServer:[]})),m=()=>{},v=()=>{};return(e,d)=>{const i=w;return a(),t("div",he,[o("div",_e,[o("div",ge,[o("img",{src:n.chatRecord.avatar,alt:""},null,8,Ce)]),o("div",be,[o("span",null,x(n.chatRecord.name),1)])]),o("div",ye,[o("div",ke,[o("div",xe,[we,o("span",null,x(n.chatRecord.name),1),Re]),o("div",Ie,[Se,r.commonServer.length?(a(),t("span",Fe,x(r.commonServer.length)+" 个共同的服务器 ",1)):(a(),t("span",Me,"没有共同的服务器")),o("div",He,[s(i,{size:"small",onClick:m,class:"delete"},{default:l((()=>[u(" 删除好友 ")])),_:1}),s(i,{size:"small",onClick:v,class:"shield"},{default:l((()=>[u(" 屏蔽 ")])),_:1})])])])])])}}}),[["__scopeId","data-v-bde57c9c"]]),Ve={class:"chat-record-list"},Le=["onMouseenter","onMouseleave"],Ue={class:"chat-record-list-item-left"},Be={class:"chat-record-list-item-right"},Ee={class:"chat-record-list-item-right-top"},Oe={class:"chat-record-list-item-right-top-left"},ze={class:"chat-record-list-item-right-bottom"},Ae={class:"chat-search-box"},De=["placeholder"],Ke=B(e({__name:"Main",setup(e){const n=v(""),d=k({avatar:"",id:"",message:[],name:"",time:""}),r=k([]),p=P(),f=v(!1),g=v(!0);R((()=>{p.getUserInfo()}));const C=()=>{},y=D((async e=>{if(!e)return;const{data:a}=await pe.getChatRecord(e);d.avatar=a.avatar,d.id=a.id,d.name=a.name,d.time=a.time,r.splice(0,r.length,...a.message)}));return i((()=>O.currentRoute.value.params.id),(e=>{y(e)}),{immediate:!0}),(e,i)=>{const v=F,y=b,k=w,R=m;return a(),c(R,{class:"main-box-right-main2-main1"},{default:l((()=>[o("div",Ve,[s(je,{chatRecord:d},null,8,["chatRecord"]),(a(!0),t(M,null,I(r,(e=>(a(),t("div",{class:"chat-record-list-item",key:e.messageId,onMouseenter:a=>{return(t=e).isShow=!0,void("me"===t.messageFrom?f.value=!1:f.value=!0);var t},onMouseleave:a=>{return(t=e).isShow=!1,t.messageFrom,void(f.value=!1);var t}},[o("div",Ue,[s(v,{src:"me"===e.messageFrom?d.avatar:S(p).getUserAvatar},null,8,["src"])]),o("div",Be,[o("div",Ee,[o("div",Oe,[o("span",null,x(d.name),1),o("span",null,x(e.time),1)])]),o("div",ze,[o("p",null,[s(ue,{display:"me"!==e.messageFrom,mouseenter:f.value,mouseleave:g.value,item:e},{default:l((()=>[u(x(e.content),1)])),_:2},1032,["display","mouseenter","mouseleave","item"])])])])],40,Le)))),128))]),o("div",Ae,[h(o("input",{placeholder:`消息@${d.name}`,"onUpdate:modelValue":i[0]||(i[0]=e=>n.value=e),onClear:i[1]||(i[1]=e=>n.value="")},null,40,De),[[_,n.value]]),s(k,{type:"primary",onClick:C},{default:l((()=>[u("发送 "),s(y,null,{default:l((()=>[s(S(H))])),_:1})])),_:1})])])),_:1})}}}),[["__scopeId","data-v-1657f348"]]),Pe=B(e({__name:"index",setup:e=>(e,n)=>{const d=j,r=V,o=L,i=y;return a(),t("div",null,[s(i,null,{default:l((()=>[s(o,{class:"main-box-right-header2"},{default:l((()=>[s(r,null,{default:l((()=>[s(d,{span:15,class:"header-left"},{default:l((()=>[s(J)])),_:1}),s(d,{span:8,class:"header-right"},{default:l((()=>[s(te)])),_:1})])),_:1})])),_:1}),s(r,{class:"main-box-right-main2"},{default:l((()=>[s(d,{span:17},{default:l((()=>[s(i,null,{default:l((()=>[s(Ke)])),_:1})])),_:1}),s(d,{span:7},{default:l((()=>[s(i,null,{default:l((()=>[s(se)])),_:1})])),_:1})])),_:1})])),_:1})])}}),[["__scopeId","data-v-861f084f"]]);export{Pe as default};
